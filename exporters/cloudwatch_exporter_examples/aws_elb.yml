---
region: "us-west-2"
period_seconds: 30
range_seconds: 450
delay_seconds: 120
metrics:
  - aws_namespace: "AWS/ELB"
    aws_metric_name: "HTTPCode_Backend_5XX"
    aws_dimensions: ["LoadBalancerName", "AvailabilityZone"]
    set_timestamp: false
    aws_tag_select:
      resource_type_selection: "elasticloadbalancing:loadbalancer"
      resource_id_dimension: "LoadBalancerName"
      tag_selections:
        Monitoring: ["enabled"]
    aws_statistics: ["Sum"]

  - aws_namespace: "AWS/ELB"
    aws_metric_name: "HTTPCode_Backend_4XX"
    aws_dimensions: ["LoadBalancerName", "AvailabilityZone"]
    set_timestamp: false
    aws_tag_select:
      resource_type_selection: "elasticloadbalancing:loadbalancer"
      resource_id_dimension: "LoadBalancerName"
      tag_selections:
        Monitoring: ["enabled"]
    aws_statistics: ["Sum"]

  - aws_namespace: "AWS/ELB"
    aws_metric_name: "HTTPCode_ELB_5XX"
    aws_dimensions: ["LoadBalancerName", "AvailabilityZone"]
    set_timestamp: false
    aws_tag_select:
      resource_type_selection: "elasticloadbalancing:loadbalancer"
      resource_id_dimension: "LoadBalancerName"
      tag_selections:
        Monitoring: ["enabled"]
    aws_statistics: ["Sum"]

  - aws_namespace: "AWS/ELB"
    aws_metric_name: "RequestCount"
    aws_dimensions: ["LoadBalancerName", "AvailabilityZone"]
    set_timestamp: false
    aws_tag_select:
      resource_type_selection: "elasticloadbalancing:loadbalancer"
      resource_id_dimension: "LoadBalancerName"
      tag_selections:
        Monitoring: ["enabled"]
    aws_statistics: ["Sum"]

  - aws_namespace: "AWS/ELB"
    aws_metric_name: "BackendConnectionErrors"
    aws_dimensions: ["LoadBalancerName", "AvailabilityZone"]
    set_timestamp: false
    aws_tag_select:
      resource_type_selection: "elasticloadbalancing:loadbalancer"
      resource_id_dimension: "LoadBalancerName"
      tag_selections:
        Monitoring: ["enabled"]
    aws_statistics: ["Sum"]

  - aws_namespace: "AWS/ELB"
    aws_metric_name: "Latency"
    aws_dimensions: ["LoadBalancerName", "AvailabilityZone"]
    set_timestamp: false
    aws_tag_select:
      resource_type_selection: "elasticloadbalancing:loadbalancer"
      resource_id_dimension: "LoadBalancerName"
      tag_selections:
        Monitoring: ["enabled"]
    aws_statistics: ["Average", "Maximum"]

  - aws_namespace: "AWS/ApplicationELB"
    aws_metric_name: "HTTPCode_ELB_5XX_Count"
    aws_dimensions: ["LoadBalancer", "AvailabilityZone"]
    set_timestamp: false
    aws_tag_select:
      resource_type_selection: "elasticloadbalancing:loadbalancer"
      resource_id_dimension: "LoadBalancer"
      tag_selections:
        Monitoring: ["enabled"]
    aws_statistics: ["Sum"]

  - aws_namespace: "AWS/ApplicationELB"
    aws_metric_name: "HTTPCode_ELB_4XX_Count"
    aws_dimensions: ["LoadBalancer", "AvailabilityZone"]
    set_timestamp: false
    aws_tag_select:
      resource_type_selection: "elasticloadbalancing:loadbalancer"
      resource_id_dimension: "LoadBalancer"
      tag_selections:
        Monitoring: ["enabled"]
    aws_statistics: ["Sum"]

  - aws_namespace: "AWS/ApplicationELB"
    aws_metric_name: "HTTPCode_Target_5XX_Count"
    aws_dimensions: ["LoadBalancer", "AvailabilityZone"]
    set_timestamp: false
    aws_tag_select:
      resource_type_selection: "elasticloadbalancing:loadbalancer"
      resource_id_dimension: "LoadBalancer"
      tag_selections:
        Monitoring: ["enabled"]
    aws_statistics: ["Sum"]

  - aws_namespace: "AWS/ApplicationELB"
    aws_metric_name: "HTTPCode_Target_4XX_Count"
    aws_dimensions: ["LoadBalancer", "AvailabilityZone"]
    set_timestamp: false
    aws_tag_select:
      resource_type_selection: "elasticloadbalancing:loadbalancer"
      resource_id_dimension: "LoadBalancer"
      tag_selections:
        Monitoring: ["enabled"]
    aws_statistics: ["Sum"]

  - aws_namespace: "AWS/ApplicationELB"
    aws_metric_name: "ActiveConnectionCount"
    aws_dimensions: ["LoadBalancer", "AvailabilityZone"]
    set_timestamp: false
    aws_tag_select:
      resource_type_selection: "elasticloadbalancing:loadbalancer"
      resource_id_dimension: "LoadBalancer"
      tag_selections:
        Monitoring: ["enabled"]
    aws_statistics: ["Sum"]

  - aws_namespace: "AWS/ApplicationELB"
    aws_metric_name: "NewConnectionCount"
    aws_dimensions: ["LoadBalancer", "AvailabilityZone"]
    set_timestamp: false
    aws_tag_select:
      resource_type_selection: "elasticloadbalancing:loadbalancer"
      resource_id_dimension: "LoadBalancer"
      tag_selections:
        Monitoring: ["enabled"]
    aws_statistics: ["Sum"]

  - aws_namespace: "AWS/ApplicationELB"
    aws_metric_name: "RequestCount"
    aws_dimensions: ["LoadBalancer", "AvailabilityZone"]
    set_timestamp: false
    aws_tag_select:
      resource_type_selection: "elasticloadbalancing:loadbalancer"
      resource_id_dimension: "LoadBalancer"
      tag_selections:
        Monitoring: ["enabled"]
    aws_statistics: ["Sum"]

  - aws_namespace: "AWS/ApplicationELB"
    aws_metric_name: "TargetResponseTime"
    aws_dimensions: ["LoadBalancer", "AvailabilityZone"]
    set_timestamp: false
    aws_tag_select:
      resource_type_selection: "elasticloadbalancing:loadbalancer"
      resource_id_dimension: "LoadBalancer"
      tag_selections:
        Monitoring: ["enabled"]
    aws_statistics: ["Average", "Maximum"]
